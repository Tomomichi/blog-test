<!DOCTYPE html><html lang="ja"><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-30867542-2"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-30867542-2', {
              page_path: window.location.pathname,
            });
          </script><meta charSet="utf-8"/><meta content="width=device-width, initial-scale=1, minimum-scale=1" name="viewport"/><link rel="icon" href="/images/notsobad/favicon.ico"/><meta name="description" content="ぼっちスタートアップが日々がんばっています。"/><meta content="website" property="og:type"/><meta content="NOT SO BADなブログ" property="og:site_name"/><meta content="summary_large_image" name="twitter:card"/><title>百人一首の詠み上げを音声認識していち早く下の句を教えてくれるクソアプリを作りました</title><meta content="百人一首の詠み上げを音声認識していち早く下の句を教えてくれるクソアプリを作りました" property="og:title"/><meta content="https://notsobad.jp/blog/2018/12/19/104214" property="og:url"/><link rel="canonical" href="https://blog.notsobad.jp/2018/12/19/104214"/><meta content="https://storage.googleapis.com/blog-notsobad/images/20181122175103.png" property="og:image"/><meta content="https://storage.googleapis.com/blog-notsobad/images/20181122175103.png" name="twitter:image:src"/><meta content="この記事は「[クソアプリアドベントカレンダー2018](https://qiita.com/advent-calendar/2018/kuso-app)」19日目の記事です。



タイトルそのまんまですが、 百人一首の詠み上げを音声認識して、いち早く下の句を教えてくれるクソアプリ「百人一首チーター」を作りました。

[cheetah.notsobad.jp](https://cheetah.notsobad.jp/)" property="og:description"/><meta content="百人一首の詠み上げを音声認識していち早く下の句を教えてくれるクソアプリを作りました" name="twitter:title"/><meta content="この記事は「[クソアプリアドベントカレンダー2018](https://qiita.com/advent-calendar/2018/kuso-app)」19日目の記事です。



タイトルそのまんまですが、 百人一首の詠み上げを音声認識して、いち早く下の句を教えてくれるクソアプリ「百人一首チーター」を作りました。

[cheetah.notsobad.jp](https://cheetah.notsobad.jp/)" name="twitter:description"/><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/2a61bf5a1a48ba5e812c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2a61bf5a1a48ba5e812c.css"/><link rel="preload" href="/_next/static/4WMxPnToLL1tLub_9wlEF/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/4WMxPnToLL1tLub_9wlEF/pages/entry/%5B...slug%5D.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-c212667a5f965e81e004.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.4dd1003cc9c949c7fcd3.js" as="script"/><link rel="preload" href="/_next/static/chunks/e101166fa47a6f9b499c839ffe7e06d3a068b976.638a41a739461475fef6.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-5655d340547bb835631a.js" as="script"/><link rel="preload" href="/_next/static/chunks/0e5f2ef3bf5e1e230eaa0e1402cbee45f80e14ca.df0200d1732db7c6b1bb.js" as="script"/><link rel="preload" href="/_next/static/chunks/c34625df1ce3899990efa4e4254c5efc0f608d33.7cfb4410e6422c3e9136.js" as="script"/></head><body><div id="__next"><div><section class="text-gray-700 body-font"><div class="container px-5 md:px-24 p-5 md:pb-12 mx-auto max-w-screen-lg"><h1 class="text-xl font-bold title-font text-gray-900 mb-4 inline-block border-b-4 border-gray-900"><a href="/">NOT SO BAD なブログ</a></h1><h2 class="text-xs text-gray-700 tracking-widest font-medium title-font">ぼっちスタートアップが日々がんばっています。</h2></div></section><section class="text-gray-700 body-font overflow-hidden break-all"><div class="container px-5 md:px-24 pb-24 mx-auto max-w-screen-lg"><div class="-my-8"><div class="py-12 flex flex-wrap md:flex-no-wrap"><div class="md:w-64 md:mb-0 mb-6 flex-shrink-0 flex flex-col"><span class="mt-1 text-gray-900 font-bold">2018-12-19</span></div><div class="flex-grow"><h2 class="text-2xl md:text-3xl font-bold text-gray-900 title-font mb-4">百人一首の詠み上げを音声認識していち早く下の句を教えてくれるクソアプリを作りました</h2><img src="https://storage.googleapis.com/blog-notsobad/images/20181122175103.png" alt="百人一首の詠み上げを音声認識していち早く下の句を教えてくれるクソアプリを作りました" class="mb-4"/><div id="mainText" class="leading-relaxed"><p class="my-6">この記事は「<a href="https://qiita.com/advent-calendar/2018/kuso-app" target="_blank" class="text-blue-600 underline">クソアプリアドベントカレンダー2018</a>」19日目の記事です。</p><p class="my-6">タイトルそのまんまですが、 百人一首の詠み上げを音声認識して、いち早く下の句を教えてくれるクソアプリ「百人一首チーター」を作りました。</p><p class="my-6"><a href="https://cheetah.notsobad.jp/" target="_blank" class="text-blue-600 underline">cheetah.notsobad.jp</a>* * *</p><h2 class="font-bold inline-block my-4 md:my-8 text-2xl">デモ動画</h2><p class="my-6">※音が出ます</p><p class="my-6">画面上部に音声認識した結果をそのまま出力していて、それをもとに正解と思われる確率が高い百人一首の句を画面下部「判定結果」のところに上位3つまで表示しています。</p><p class="my-6">映像だけ見ると認識開始までにタイムラグがあるように見えますが、読み上げが始まるまで間が空いただけです（動画作りがヘタ）。 実際に読み上げが始まってからはちょっと感動するくらいのスピードで正確に認識してくれてます。</p><h2 class="font-bold inline-block my-4 md:my-8 text-2xl">なんで作ったの？</h2><p class="my-6">毎年正月は実家で親戚の集まりがあるのですが、数年前から小学生の甥っ子？も交えてみんなで百人一首をやるようになりました。</p><p class="my-6">初年度こそ大人げなく勝利したものの、すっかりハマった甥っ子はそれから本格的に百人一首を覚えて（百人一首クラブに入ったらしい）、次の年からは大人が誰も勝てなくなってしまいましたw</p><p class="my-6">こっちは毎年記憶も衰える一方なので、このままでは永遠に勝ち目がありません。また甥っ子に気を遣わせたり手加減を覚えさせるのも本意ではありません。</p><p class="my-6">というわけで、大人の技術力を使ったこのチートツールで今年こそ甥っ子に社会の厳しさを教えてやりたいというのが開発の背景です（半分くらい本気）。</p><h2 class="font-bold inline-block my-4 md:my-8 text-2xl">技術的な話</h2><p class="my-6">ペライチの静的なページをGithubPagesでホスティングしています。 メインの処理は素のJavascriptでわずか50行くらい。<a href="https://github.com/notsobad-jp/cheetah" target="_blank" class="text-blue-600 underline">Githubで公開</a>してますのでよければ見てみてください。（コードが汚いのは許して！）</p><p class="my-6">一番コアの音声認識の部分は、HTML5の<a href="https://developer.mozilla.org/ja/docs/Web/API/Web_Speech_API" target="_blank" class="text-blue-600 underline">Speech Recognition API</a>を使っています。</p><p class="my-6"><a href="https://qiita.com/PonDad/items/4ca433ad03efbf7499a2" target="_blank" class="text-blue-600 underline">qiita.com</a></p><p class="my-6">対応しているのは今のところPCとAndroidのChromeのみですが、これが異常に便利で精度が高い。</p><p class="my-6">音声認識した文字列と百人一首データのマッチングでもっと手こずるかと思ってたんですが、音声認識が恐ろしい精度でほぼ完全な文字列を返してくるから、かなり適当な処理でも充分実用的なマッチング精度にできました。</p><p class="my-6">実際にやってる処理は、認識した文字列を1文字ずつに分解して、100首の中でマッチする文字数が多い順に返す、という感じです（なんて適当な…）。</p><p class="my-6">しかし試してみると思ったよりタイムラグも少ないし、マッチングの精度もなかなか高いしで完全に満足してしまいました。 まぁクソアプリですし🍣。</p><h2 class="font-bold inline-block my-4 md:my-8 text-2xl">え、百人一首を持ってないから遊べない？</h2><p class="my-6">そんなときはスマホを取り札にして百人一首すればいいじゃないですか。</p><p class="my-6"><a href="https://karta.notsobad.jp/" target="_blank" class="text-blue-600 underline">karta.notsobad.jp</a></p><p class="my-6">なんとユーザー登録も不要、URLをシェアするだけで超お手軽にスマホが取り札になって百人一首が遊べるぞ〜。</p><hr/><h2 class="font-bold inline-block my-4 md:my-8 text-2xl">まとめ：クソアプリはよいぞ</h2><p class="my-6">というわけで、実質開発2日くらいのちょうどいい感じでクソアプリを作ることができました。 （メインのロジック1日＋もろもろ仕上げるのに1日くらい）</p><p class="my-6">普段の開発で絶対使わない技術を使ったりできるのもクソアプリ開発のいいところですね。音声認識なんてやる予定全然なかったけど、ここまで簡単で精度が高いとは思いませんでした。</p><p class="my-6">クソアプリは年末のお祭りみたいな感じで楽しいので、来年もぜひやってみたいと思います。気になった方もぜひどうぞ。</p><p class="my-6">明日はいよいよクソアプリ界の重鎮、あんどさんです。お楽しみに！ <a href="https://ampersand.qrunch.io/entries/zqnaH3UJ7Uq2RmwD" target="_blank" class="text-blue-600 underline">ampersand.qrunch.io</a></p></div></div></div></div></div></section><footer class="text-gray-200 body-font"><div class="bg-gray-900"><div class="container mx-auto py-6 px-5 md:px-24 flex flex-wrap flex-col sm:flex-row max-w-screen-lg"><p class="text-gray-200 text-sm text-center sm:text-left"><a class="text-gray-500 hover:text-gray-200 ml-1" href="/">© 2020 NOT SO BADなブログ</a></p></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"entry":{"title":"百人一首の詠み上げを音声認識していち早く下の句を教えてくれるクソアプリを作りました","slug":"2018/12/19/104214","excerpt":"この記事は「[クソアプリアドベントカレンダー2018](https://qiita.com/advent-calendar/2018/kuso-app)」19日目の記事です。\n\n![f:id:o_tomomichi:20181122175103p:plain](https://cdn-ak.f.st-hatena.com/images/fotolife/o/o_tomomichi/20181122/20181122175103.png \"f:id:o_tomomichi:20181122175103p:plain\")\n\nタイトルそのまんまですが、 百人一首の詠み上げを音声認識して、いち早く下の句を教えてくれるクソアプリ「百人一首チーター」を作りました。\n\n[cheetah.notsobad.jp](https://cheetah.notsobad.jp/)","content":"この記事は「[クソアプリアドベントカレンダー2018](https://qiita.com/advent-calendar/2018/kuso-app)」19日目の記事です。\n\n![f:id:o_tomomichi:20181122175103p:plain](https://cdn-ak.f.st-hatena.com/images/fotolife/o/o_tomomichi/20181122/20181122175103.png \"f:id:o_tomomichi:20181122175103p:plain\")\n\nタイトルそのまんまですが、 百人一首の詠み上げを音声認識して、いち早く下の句を教えてくれるクソアプリ「百人一首チーター」を作りました。\n\n[cheetah.notsobad.jp](https://cheetah.notsobad.jp/)* * *\n\nデモ動画\n----\n\n※音が出ます\n\n画面上部に音声認識した結果をそのまま出力していて、それをもとに正解と思われる確率が高い百人一首の句を画面下部「判定結果」のところに上位3つまで表示しています。\n\n映像だけ見ると認識開始までにタイムラグがあるように見えますが、読み上げが始まるまで間が空いただけです（動画作りがヘタ）。 実際に読み上げが始まってからはちょっと感動するくらいのスピードで正確に認識してくれてます。\n\nなんで作ったの？\n--------\n\n毎年正月は実家で親戚の集まりがあるのですが、数年前から小学生の甥っ子？も交えてみんなで百人一首をやるようになりました。\n\n初年度こそ大人げなく勝利したものの、すっかりハマった甥っ子はそれから本格的に百人一首を覚えて（百人一首クラブに入ったらしい）、次の年からは大人が誰も勝てなくなってしまいましたw\n\nこっちは毎年記憶も衰える一方なので、このままでは永遠に勝ち目がありません。また甥っ子に気を遣わせたり手加減を覚えさせるのも本意ではありません。\n\nというわけで、大人の技術力を使ったこのチートツールで今年こそ甥っ子に社会の厳しさを教えてやりたいというのが開発の背景です（半分くらい本気）。\n\n技術的な話\n-----\n\nペライチの静的なページをGithubPagesでホスティングしています。 メインの処理は素のJavascriptでわずか50行くらい。[Githubで公開](https://github.com/notsobad-jp/cheetah)してますのでよければ見てみてください。（コードが汚いのは許して！）\n\n一番コアの音声認識の部分は、HTML5の[Speech Recognition API](https://developer.mozilla.org/ja/docs/Web/API/Web_Speech_API)を使っています。\n\n[qiita.com](https://qiita.com/PonDad/items/4ca433ad03efbf7499a2)\n\n対応しているのは今のところPCとAndroidのChromeのみですが、これが異常に便利で精度が高い。\n\n音声認識した文字列と百人一首データのマッチングでもっと手こずるかと思ってたんですが、音声認識が恐ろしい精度でほぼ完全な文字列を返してくるから、かなり適当な処理でも充分実用的なマッチング精度にできました。\n\n実際にやってる処理は、認識した文字列を1文字ずつに分解して、100首の中でマッチする文字数が多い順に返す、という感じです（なんて適当な…）。\n\nしかし試してみると思ったよりタイムラグも少ないし、マッチングの精度もなかなか高いしで完全に満足してしまいました。 まぁクソアプリですし🍣。\n\nえ、百人一首を持ってないから遊べない？\n-------------------\n\nそんなときはスマホを取り札にして百人一首すればいいじゃないですか。\n\n[karta.notsobad.jp](https://karta.notsobad.jp/)\n\nなんとユーザー登録も不要、URLをシェアするだけで超お手軽にスマホが取り札になって百人一首が遊べるぞ〜。\n\n* * *\n\nまとめ：クソアプリはよいぞ\n-------------\n\nというわけで、実質開発2日くらいのちょうどいい感じでクソアプリを作ることができました。 （メインのロジック1日＋もろもろ仕上げるのに1日くらい）\n\n普段の開発で絶対使わない技術を使ったりできるのもクソアプリ開発のいいところですね。音声認識なんてやる予定全然なかったけど、ここまで簡単で精度が高いとは思いませんでした。\n\nクソアプリは年末のお祭りみたいな感じで楽しいので、来年もぜひやってみたいと思います。気になった方もぜひどうぞ。\n\n明日はいよいよクソアプリ界の重鎮、あんどさんです。お楽しみに！ [ampersand.qrunch.io](https://ampersand.qrunch.io/entries/zqnaH3UJ7Uq2RmwD)","date":1545183734000,"image":"https://storage.googleapis.com/blog-notsobad/images/20181122175103.png"}},"__N_SSG":true},"page":"/entry/[...slug]","query":{"slug":["2018","12","19","104214"]},"buildId":"4WMxPnToLL1tLub_9wlEF","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/runtime/polyfills-f1eec38e83a82f41790c.js"></script><script async="" data-next-page="/_app" src="/_next/static/4WMxPnToLL1tLub_9wlEF/pages/_app.js"></script><script async="" data-next-page="/entry/[...slug]" src="/_next/static/4WMxPnToLL1tLub_9wlEF/pages/entry/%5B...slug%5D.js"></script><script src="/_next/static/runtime/webpack-c212667a5f965e81e004.js" async=""></script><script src="/_next/static/chunks/framework.4dd1003cc9c949c7fcd3.js" async=""></script><script src="/_next/static/chunks/e101166fa47a6f9b499c839ffe7e06d3a068b976.638a41a739461475fef6.js" async=""></script><script src="/_next/static/runtime/main-5655d340547bb835631a.js" async=""></script><script src="/_next/static/chunks/0e5f2ef3bf5e1e230eaa0e1402cbee45f80e14ca.df0200d1732db7c6b1bb.js" async=""></script><script src="/_next/static/chunks/c34625df1ce3899990efa4e4254c5efc0f608d33.7cfb4410e6422c3e9136.js" async=""></script><script src="/_next/static/4WMxPnToLL1tLub_9wlEF/_buildManifest.js" async=""></script><script src="/_next/static/4WMxPnToLL1tLub_9wlEF/_ssgManifest.js" async=""></script></body></html>